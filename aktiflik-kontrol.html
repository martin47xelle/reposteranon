<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Anonim Chat Tracker</title>
    <style>
        body { font-family: 'Inter', sans-serif; background: #0f0f0f; color: #e0e0e0; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .card { background: #1a1a1a; border: 1px solid #333; padding: 25px; border-radius: 20px; width: 320px; text-align: center; box-shadow: 0 15px 35px rgba(0,0,0,0.5); }
        #user-img { width: 80px; height: 80px; border-radius: 50%; margin-bottom: 15px; border: 2px solid #007bff; display: none; margin-left: auto; margin-right: auto; }
        .time-badge { background: #252525; padding: 10px; border-radius: 10px; margin-top: 15px; }
        .relative-time { display: block; font-size: 1.2rem; font-weight: bold; color: #00ff88; margin-bottom: 5px; }
        .exact-time { font-size: 0.75rem; color: #888; }
        button { background: #007bff; color: white; border: none; width: 100%; padding: 12px; border-radius: 10px; cursor: pointer; font-weight: bold; margin-top: 20px; transition: 0.2s; }
        button:hover { background: #0056b3; transform: scale(1.02); }
    </style>
</head>
<body>

<div class="card">
    <img id="user-img" src="">
    <div style="font-weight: bold; margin-bottom: 5px;">budabisibeenmiyorha1</div>
    
    <div class="time-badge">
        <span id="rel-time" class="relative-time">Bekleniyor...</span>
        <span id="exact-time" class="exact-time">-</span>
    </div>

    <button onclick="sorgula()">KONTROL ET</button>
</div>

<script>
function timeAgo(date) {
    const now = new Date();
    const diffInSeconds = Math.floor((now - date) / 1000);

    if (diffInSeconds < 60) return `${diffInSeconds} saniye önce`;
    const diffInMinutes = Math.floor(diffInSeconds / 60);
    if (diffInMinutes < 60) return `${diffInMinutes} dakika önce`;
    const diffInHours = Math.floor(diffInMinutes / 60);
    if (diffInHours < 24) return `${diffInHours} saat önce`;
    
    return date.toLocaleDateString('tr-TR');
}

async function sorgula() {
    const relTimeText = document.getElementById('rel-time');
    const exactTimeText = document.getElementById('exact-time');
    const userImg = document.getElementById('user-img');
    
    relTimeText.innerText = "Sorgulanıyor...";

    const formData = new FormData();
    formData.append('username', 'whyudontlikeme');

    try {
        // CORS sorununu aşmak için Proxy eklendi (Orijinal yapı korundu)
        const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
        const targetUrl = 'https://api.anonim.chat/api/1.2/users/show';

        const response = await fetch(proxyUrl + targetUrl, {
            method: 'POST',
            headers: {
                'jwt': 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoyNzcxOTMzMTY1ODQ4MjQsImFub24iOiI5ODA0YWI3MjRmODNjMTIiLCJoYXNoIjoiYTRlODY1MjkzOGMwMDkxOTZjOTIzNTFhMGM0NjBkMWEiLCJ0aW1lIjoxNzY2ODIzNjYzfQ.RcQIFWXTl3sz-mlFWQ8T7ng-Ivh6tyw08-DW3MdywX0',
                'Accept': '*/*'
            },
            body: formData
        });

        const data = await response.json();

        if (data.last_activity) {
            let date = new Date(data.last_activity.replace(/-/g, '/'));
            date.setHours(date.getHours() + 3);

            relTimeText.innerText = timeAgo(date);
            exactTimeText.innerText = date.toLocaleString('tr-TR');
            
            userImg.src = data.image;
            userImg.style.display = "block";
        }
    } catch (err) {
        relTimeText.innerText = "Hata!";
        console.error(err);
    }
}
</script>

</body>
</html>
